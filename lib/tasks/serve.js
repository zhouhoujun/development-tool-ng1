"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__decorate=function(e,r,t,n){var o,s=arguments.length,a=s<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,t):n;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,t,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(a=(s<3?o(a):s>3?o(r,t,a):o(r,t))||a);return s>3&&a&&Object.defineProperty(r,t,a),a},__metadata=function(e,r){if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)},_=require("lodash"),development_core_1=require("development-core"),browserSync=require("browser-sync"),StartServer=function(){function e(r){_classCallCheck(this,e),this.info=r}return _createClass(e,[{key:"getInfo",value:function(){return this.info.name=this.info.name||"web-serve",this.info}},{key:"setup",value:function(e,r){var t=e.option,n=null;t.serverFiles&&(n=_.isFunction(t.serverFiles)?t.serverFiles(e):t.serverFiles),n=n||[];var o=e.getDist(this.getInfo()),s=null;s=t.serverBaseDir?_.isFunction(t.serverBaseDir)?t.serverBaseDir(e):t.serverBaseDir:o,n.push(o+"/**/*");var a={server:{baseDir:s},open:!0,port:process.env.PORT||3e3,files:n};t.browsersync&&(a=_.extend(a,_.isFunction(t.browsersync)?t.browsersync(e,a):t.browsersync));var i=e.subTaskName(this.info);return r.task(i,function(e){browserSync(a,function(r,t){r&&e(r)})}),i}}]),e}();StartServer=__decorate([development_core_1.task({order:function(e,r){return r.env.test?{value:.25,runWay:development_core_1.RunWay.parallel}:1},oper:development_core_1.Operation.default|development_core_1.Operation.serve}),__metadata("design:paramtypes",[Object])],StartServer),exports.StartServer=StartServer;
//# sourceMappingURL=../sourcemaps/tasks/serve.js.map
