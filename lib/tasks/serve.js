"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__decorate=function(e,t,r,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},__metadata=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=require("lodash"),development_core_1=require("development-core"),browserSync=require("browser-sync"),StartServer=function(){function e(t){_classCallCheck(this,e),this.info=t}return _createClass(e,[{key:"getInfo",value:function(){return this.info.name=this.info.name||"web-serve",this.info}},{key:"setup",value:function(e,t){var r=e.option.browsersync||{},n=null;r.files&&(n=_.isFunction(r.files)?r.files(e):r.files),n=n||[];var o=e.getPackage(),a="";r.jspm&&r.jspm.packages?a=e.toRootPath(e.toStr(r.jspm.packages)):o.jspm&&o.jspm&&o.jspm.directories&&(a=e.toRootPath(o.jspm.directories.packages)),a&&n.push(a+"/**/*");var s=e.getDist(this.getInfo()),c=null;c=r.baseDir?e.toRootSrc(_.isFunction(r.baseDir)?r.baseDir(e):r.baseDir):s,n.push(s+"/**/*");var i={server:{baseDir:c},open:!0,port:process.env.PORT||3e3,files:n};r.browsersync&&(i=_.extend(i,_.isFunction(r.browsersync)?r.browsersync(e,i):r.browsersync));var f=e.subTaskName(this.info);return t.task(f,function(e){browserSync(i,function(t,r){t&&e(t)})}),f}}]),e}();StartServer=__decorate([development_core_1.task({order:function(e,t){return t.env.test?{value:.25,runWay:development_core_1.RunWay.parallel}:1},oper:development_core_1.Operation.default|development_core_1.Operation.serve}),__metadata("design:paramtypes",[Object])],StartServer),exports.StartServer=StartServer;
//# sourceMappingURL=../sourcemaps/tasks/serve.js.map
